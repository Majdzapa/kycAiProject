spring:
  application:
    name: kyc-ai-service
  
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/kyc_db}
    username: ${SPRING_DATASOURCE_USERNAME:kyc_user}
    password: ${SPRING_DATASOURCE_PASSWORD:secure_password}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
        database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: false
  
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB
  
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USER:guest}
    password: ${RABBITMQ_PASS:guest}

# LangChain4j Configuration
langchain4j:
  ollama:
    base-url: ${OLLAMA_BASE_URL:http://localhost:11434}
    timeout: 120s
    chat-model:
      model-name: llama3.2
      temperature: 0.7
      max-tokens: 2000
    embedding-model:
      model-name: nomic-embed-text
      max-segments-per-batch: 10

# GDPR Configuration
gdpr:
  data-retention-days: ${GDPR_DATA_RETENTION_DAYS:90}
  anonymization-enabled: ${GDPR_ANONYMIZATION_ENABLED:true}
  encryption-key: ${GDPR_ENCRYPTION_KEY:change-me-in-production-32chars!}
  audit-log-retention-years: 7

# Document Storage
minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:minioadmin}
  secret-key: ${MINIO_SECRET_KEY:minioadmin}
  bucket-name: kyc-documents
  secure: false

# Tesseract OCR Configuration
tesseract:
  datapath: ${TESSERACT_DATAPATH:/usr/share/tesseract-ocr/5/tessdata}

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:Ynktc3VwZXItc2VjcmV0LWp3dC1rZXktdGhhdC1zaG91bGQtYmUtY2hhbmdlZC1pbi1wcm9kdWN0aW9u}
  expiration: 86400000  # 24 hours
  refresh-expiration: 604800000  # 7 days

# Server Configuration
server:
  port: 8080
  servlet:
    context-path: /

# Management Endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized

# Logging
logging:
  level:
    com.kyc.ai: DEBUG
    dev.langchain4j: INFO
    org.springframework.security: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"