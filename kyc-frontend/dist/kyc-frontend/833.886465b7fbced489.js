"use strict";(self.webpackChunkkyc_frontend=self.webpackChunkkyc_frontend||[]).push([[833],{833:(U,u,r)=>{r.r(u),r.d(u,{TransactionMonitorComponent:()=>Y});var t=r(4438),m=r(177),e=r(9417),l=r(5596),p=r(8834),f=r(9631),h=r(2798),c=r(9159),C=r(9213),F=r(5416),g=r(1626),T=r(5312);let y=(()=>{class n{constructor(){this.http=(0,t.WQX)(g.Qq),this.apiUrl=`${T.c.apiUrl}/transactions`}getCustomerTransactions(o){return this.http.get(`${this.apiUrl}/customer/${o}`)}logTransaction(o){return this.http.post(this.apiUrl,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var d=r(882),b=r(6600);function k(n,a){if(1&n&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&n){const o=a.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(o)}}function E(n,a){1&n&&(t.j41(0,"th",34),t.EFF(1," Date "),t.k0s())}function M(n,a){if(1&n&&(t.j41(0,"td",35),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const o=a.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,o.timestamp,"short")," ")}}function v(n,a){1&n&&(t.j41(0,"th",34),t.EFF(1," Type "),t.k0s())}function j(n,a){if(1&n&&(t.j41(0,"td",35)(1,"span",36),t.EFF(2),t.k0s()()),2&n){const o=a.$implicit;t.R7$(),t.Y8G("ngClass",o.type.toLowerCase()),t.R7$(),t.SpI(" ",o.type," ")}}function S(n,a){1&n&&(t.j41(0,"th",34),t.EFF(1," Amount "),t.k0s())}function R(n,a){if(1&n&&(t.j41(0,"td",35),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const o=a.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,o.amount,o.currency)," ")}}function D(n,a){1&n&&(t.j41(0,"th",34),t.EFF(1," Curr "),t.k0s())}function I(n,a){if(1&n&&(t.j41(0,"td",35),t.EFF(1),t.k0s()),2&n){const o=a.$implicit;t.R7$(),t.SpI(" ",o.currency," ")}}function x(n,a){1&n&&(t.j41(0,"th",34),t.EFF(1," From "),t.k0s())}function $(n,a){if(1&n&&(t.j41(0,"td",35),t.EFF(1),t.k0s()),2&n){const o=a.$implicit;t.R7$(),t.SpI(" ",o.sourceCountry," ")}}function P(n,a){1&n&&(t.j41(0,"th",34),t.EFF(1," To "),t.k0s())}function O(n,a){if(1&n&&(t.j41(0,"td",35),t.EFF(1),t.k0s()),2&n){const o=a.$implicit;t.R7$(),t.SpI(" ",o.destinationCountry," ")}}function N(n,a){1&n&&t.nrm(0,"tr",37)}function _(n,a){1&n&&t.nrm(0,"tr",38)}function w(n,a){1&n&&(t.j41(0,"div",39),t.EFF(1," No transactions found for this customer. "),t.k0s())}let Y=(()=>{class n{constructor(){this.fb=(0,t.WQX)(e.ok),this.transactionService=(0,t.WQX)(y),this.snackBar=(0,t.WQX)(F.UG),this.transactions=(0,t.vPA)([]),this.displayedColumns=["timestamp","type","amount","currency","source","destination"],this.searchForm=this.fb.group({customerId:["",e.k0.required]}),this.transactionForm=this.fb.group({customerId:["",e.k0.required],amount:[1e3,[e.k0.required,e.k0.min(1)]],currency:["USD",e.k0.required],type:["TRANSFER",e.k0.required],sourceCountry:["US",e.k0.required],destinationCountry:["US",e.k0.required]}),this.transactionTypes=["DEPOSIT","WITHDRAWAL","TRANSFER","CRYPTO_PURCHASE","CRYPTO_SALE","PAYMENT"]}loadTransactions(){this.searchForm.valid&&this.transactionService.getCustomerTransactions(this.searchForm.value.customerId).subscribe({next:i=>this.transactions.set(i),error:i=>this.snackBar.open("Error loading transactions","Close",{duration:3e3})})}logTransaction(){this.transactionForm.valid&&this.transactionService.logTransaction(this.transactionForm.value).subscribe({next:i=>{this.snackBar.open("Transaction logged","Close",{duration:3e3}),this.searchForm.value.customerId===i.customerId&&this.transactions.update(s=>[i,...s])},error:i=>this.snackBar.open("Failed to log transaction","Close",{duration:3e3})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-transaction-monitor"]],standalone:!0,features:[t.aNF],decls:85,vars:9,consts:[[1,"transaction-container"],[1,"content-grid"],[1,"left-panel"],[1,"search-card"],[1,"search-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","customerId","placeholder","CUST-..."],["matSuffix",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"form-card"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","type","number","formControlName","amount"],["matInput","","formControlName","currency"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","sourceCountry","placeholder","US"],["matInput","","formControlName","destinationCountry","placeholder","US"],["mat-stroked-button","","color","accent","type","submit",1,"full-width",3,"disabled"],[1,"list-card"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","timestamp"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","amount"],["matColumnDef","currency"],["matColumnDef","source"],["matColumnDef","destination"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"type-badge",3,"ngClass"],["mat-header-row",""],["mat-row",""],[1,"empty-state"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Transaction Monitor"),t.k0s(),t.j41(3,"div",1)(4,"div",2)(5,"mat-card",3)(6,"mat-card-header")(7,"mat-card-title"),t.EFF(8,"Customer Search"),t.k0s()(),t.j41(9,"mat-card-content")(10,"form",4),t.bIt("ngSubmit",function(){return s.loadTransactions()}),t.j41(11,"mat-form-field",5)(12,"mat-label"),t.EFF(13,"Customer ID"),t.k0s(),t.nrm(14,"input",6),t.j41(15,"mat-icon",7),t.EFF(16,"search"),t.k0s()(),t.j41(17,"button",8),t.EFF(18," Load History "),t.k0s()()()(),t.j41(19,"mat-card",9)(20,"mat-card-header")(21,"mat-card-title"),t.EFF(22,"Simulate Transaction"),t.k0s(),t.j41(23,"mat-card-subtitle"),t.EFF(24,"Inject data for risk testing"),t.k0s()(),t.j41(25,"mat-card-content")(26,"form",10),t.bIt("ngSubmit",function(){return s.logTransaction()}),t.j41(27,"mat-form-field",5)(28,"mat-label"),t.EFF(29,"Customer ID"),t.k0s(),t.nrm(30,"input",6),t.k0s(),t.j41(31,"div",11)(32,"mat-form-field",12)(33,"mat-label"),t.EFF(34,"Amount"),t.k0s(),t.nrm(35,"input",13),t.k0s(),t.j41(36,"mat-form-field",12)(37,"mat-label"),t.EFF(38,"Currency"),t.k0s(),t.nrm(39,"input",14),t.k0s()(),t.j41(40,"mat-form-field",5)(41,"mat-label"),t.EFF(42,"Type"),t.k0s(),t.j41(43,"mat-select",15),t.DNE(44,k,2,2,"mat-option",16),t.k0s()(),t.j41(45,"div",11)(46,"mat-form-field",12)(47,"mat-label"),t.EFF(48,"Source Country"),t.k0s(),t.nrm(49,"input",17),t.k0s(),t.j41(50,"mat-form-field",12)(51,"mat-label"),t.EFF(52,"Dest. Country"),t.k0s(),t.nrm(53,"input",18),t.k0s()(),t.j41(54,"button",19)(55,"mat-icon"),t.EFF(56,"add_chart"),t.k0s(),t.EFF(57," Log Transaction "),t.k0s()()()()(),t.j41(58,"mat-card",20)(59,"mat-card-header")(60,"mat-card-title"),t.EFF(61,"Transaction History"),t.k0s()(),t.j41(62,"mat-card-content")(63,"table",21),t.qex(64,22),t.DNE(65,E,2,0,"th",23)(66,M,3,4,"td",24),t.bVm(),t.qex(67,25),t.DNE(68,v,2,0,"th",23)(69,j,3,2,"td",24),t.bVm(),t.qex(70,26),t.DNE(71,S,2,0,"th",23)(72,R,3,4,"td",24),t.bVm(),t.qex(73,27),t.DNE(74,D,2,0,"th",23)(75,I,2,1,"td",24),t.bVm(),t.qex(76,28),t.DNE(77,x,2,0,"th",23)(78,$,2,1,"td",24),t.bVm(),t.qex(79,29),t.DNE(80,P,2,0,"th",23)(81,O,2,1,"td",24),t.bVm(),t.DNE(82,N,1,0,"tr",30)(83,_,1,0,"tr",31),t.k0s(),t.DNE(84,w,2,0,"div",32),t.k0s()()()()),2&i&&(t.R7$(10),t.Y8G("formGroup",s.searchForm),t.R7$(7),t.Y8G("disabled",!s.searchForm.valid),t.R7$(9),t.Y8G("formGroup",s.transactionForm),t.R7$(18),t.Y8G("ngForOf",s.transactionTypes),t.R7$(10),t.Y8G("disabled",!s.transactionForm.valid),t.R7$(9),t.Y8G("dataSource",s.transactions()),t.R7$(19),t.Y8G("matHeaderRowDef",s.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns),t.R7$(),t.Y8G("ngIf",0===s.transactions().length))},dependencies:[m.MD,m.YU,m.Sq,m.bT,m.oe,m.vh,e.X1,e.qT,e.me,e.Q0,e.BC,e.cb,e.j4,e.JD,l.Hu,l.RN,l.m2,l.MM,l.Lc,l.dh,p.Hl,p.$z,f.fS,f.fg,d.rl,d.nJ,d.yw,h.Ve,h.VO,b.wT,c.tP,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,C.m_,C.An,F._T],styles:[".transaction-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{margin-bottom:24px;color:#333}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:350px 1fr;gap:24px;align-items:start}.left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}mat-card[_ngcontent-%COMP%]{width:100%}.search-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.half-width[_ngcontent-%COMP%]{width:50%}table[_ngcontent-%COMP%]{width:100%}.type-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:11px;font-weight:700}.type-badge.deposit[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0}.type-badge.withdrawal[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.type-badge.transfer[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.type-badge.crypto_purchase[_ngcontent-%COMP%]{background-color:#fff3e0;color:#ef6c00}.type-badge.crypto_sale[_ngcontent-%COMP%]{background-color:#fff8e1;color:#fbc02d}.empty-state[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#757575;font-style:italic}"]})}}return n})()}}]);