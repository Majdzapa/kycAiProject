"use strict";(self.webpackChunkkyc_frontend=self.webpackChunkkyc_frontend||[]).push([[271],{6271:(L,f,r)=>{r.r(f),r.d(f,{ProductManagementComponent:()=>G});var t=r(4438),l=r(177),c=r(9417),s=r(5596),u=r(8834),h=r(9631),g=r(2798),m=r(9159),C=r(9213),F=r(5416),P=r(1626),k=r(5312);let b=(()=>{class e{constructor(){this.http=(0,t.WQX)(P.Qq),this.apiUrl=`${k.c.apiUrl}/products`}getAllProducts(){return this.http.get(this.apiUrl)}createProduct(o){return this.http.post(this.apiUrl,o)}deleteProduct(o){return this.http.delete(`${this.apiUrl}/${o}`)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var p=r(882),v=r(6600);function R(e,n){1&e&&(t.j41(0,"mat-error"),t.EFF(1,"Name is required"),t.k0s())}function E(e,n){if(1&e&&(t.j41(0,"mat-option",23),t.EFF(1),t.k0s()),2&e){const o=n.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(o)}}function M(e,n){if(1&e&&(t.j41(0,"mat-option",23),t.EFF(1),t.k0s()),2&e){const o=n.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(o)}}function T(e,n){1&e&&(t.j41(0,"th",24),t.EFF(1," Name "),t.k0s())}function N(e,n){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const o=n.$implicit;t.R7$(),t.SpI(" ",o.name," ")}}function S(e,n){1&e&&(t.j41(0,"th",24),t.EFF(1," Type "),t.k0s())}function O(e,n){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const o=n.$implicit;t.R7$(),t.SpI(" ",o.type," ")}}function j(e,n){1&e&&(t.j41(0,"th",24),t.EFF(1," Risk Level "),t.k0s())}function y(e,n){if(1&e&&(t.j41(0,"td",25)(1,"span",26),t.EFF(2),t.k0s()()),2&e){const o=n.$implicit;t.R7$(),t.Y8G("ngClass",o.baseRiskLevel.toLowerCase()),t.R7$(),t.SpI(" ",o.baseRiskLevel," ")}}function D(e,n){1&e&&(t.j41(0,"th",24),t.EFF(1," Score "),t.k0s())}function $(e,n){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const o=n.$implicit;t.R7$(),t.SpI(" ",o.riskScore," ")}}function A(e,n){1&e&&(t.j41(0,"th",24),t.EFF(1," Actions "),t.k0s())}function I(e,n){if(1&e){const o=t.RV6();t.j41(0,"td",25)(1,"button",27),t.bIt("click",function(){const a=t.eBV(o).$implicit,d=t.XpG();return t.Njj(d.deleteProduct(a.id))}),t.j41(2,"mat-icon"),t.EFF(3,"delete"),t.k0s()()()}}function x(e,n){1&e&&t.nrm(0,"tr",28)}function _(e,n){1&e&&t.nrm(0,"tr",29)}let G=(()=>{class e{constructor(){this.fb=(0,t.WQX)(c.ok),this.productService=(0,t.WQX)(b),this.snackBar=(0,t.WQX)(F.UG),this.products=(0,t.vPA)([]),this.displayedColumns=["name","type","riskLevel","riskScore","actions"],this.productForm=this.fb.group({name:["",c.k0.required],type:["SAVINGS_ACCOUNT",c.k0.required],baseRiskLevel:["LOW",c.k0.required],riskScore:[null]}),this.productTypes=["SAVINGS_ACCOUNT","SALARY_ACCOUNT","INVESTMENT_ACCOUNT","BROKERAGE","CRYPTO_TRADING","INTERNATIONAL_WIRE","PREPAID_CARD","LOAN","CREDIT_CARD"],this.riskLevels=["LOW","MEDIUM","HIGH","CRITICAL"]}ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getAllProducts().subscribe({next:o=>this.products.set(o),error:o=>this.snackBar.open("Error loading products","Close",{duration:3e3})})}onSubmit(){this.productForm.valid&&this.productService.createProduct(this.productForm.value).subscribe({next:i=>{this.products.update(a=>[...a,i]),this.productForm.reset({type:"SAVINGS_ACCOUNT",baseRiskLevel:"LOW"}),this.snackBar.open("Product created successfully","Close",{duration:3e3})},error:i=>this.snackBar.open("Failed to create product","Close",{duration:3e3})})}deleteProduct(o){confirm("Are you sure you want to delete this product?")&&this.productService.deleteProduct(o).subscribe({next:()=>{this.products.update(i=>i.filter(a=>a.id!==o)),this.snackBar.open("Product deleted","Close",{duration:3e3})},error:i=>this.snackBar.open("Failed to delete product","Close",{duration:3e3})})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-product-management"]],standalone:!0,features:[t.aNF],decls:56,vars:8,consts:[[1,"product-container"],[1,"content-grid"],[1,"form-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","e.g. Gold Savings"],[4,"ngIf"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","baseRiskLevel"],["matInput","","type","number","formControlName","riskScore","placeholder","Auto-assigned if empty"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"list-card"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","riskLevel"],["matColumnDef","riskScore"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"badge",3,"ngClass"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,a){if(1&i&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Product Management"),t.k0s(),t.j41(3,"div",1)(4,"mat-card",2)(5,"mat-card-header")(6,"mat-card-title"),t.EFF(7,"Create New Product"),t.k0s()(),t.j41(8,"mat-card-content")(9,"form",3),t.bIt("ngSubmit",function(){return a.onSubmit()}),t.j41(10,"mat-form-field",4)(11,"mat-label"),t.EFF(12,"Product Name"),t.k0s(),t.nrm(13,"input",5),t.DNE(14,R,2,0,"mat-error",6),t.k0s(),t.j41(15,"mat-form-field",4)(16,"mat-label"),t.EFF(17,"Product Type"),t.k0s(),t.j41(18,"mat-select",7),t.DNE(19,E,2,2,"mat-option",8),t.k0s()(),t.j41(20,"mat-form-field",4)(21,"mat-label"),t.EFF(22,"Base Risk Level"),t.k0s(),t.j41(23,"mat-select",9),t.DNE(24,M,2,2,"mat-option",8),t.k0s()(),t.j41(25,"mat-form-field",4)(26,"mat-label"),t.EFF(27,"Risk Score (Optional Override)"),t.k0s(),t.nrm(28,"input",10),t.k0s(),t.j41(29,"button",11)(30,"mat-icon"),t.EFF(31,"add"),t.k0s(),t.EFF(32," Create Product "),t.k0s()()()(),t.j41(33,"mat-card",12)(34,"mat-card-header")(35,"mat-card-title"),t.EFF(36,"Existing Products"),t.k0s()(),t.j41(37,"mat-card-content")(38,"table",13),t.qex(39,14),t.DNE(40,T,2,0,"th",15)(41,N,2,1,"td",16),t.bVm(),t.qex(42,17),t.DNE(43,S,2,0,"th",15)(44,O,2,1,"td",16),t.bVm(),t.qex(45,18),t.DNE(46,j,2,0,"th",15)(47,y,3,2,"td",16),t.bVm(),t.qex(48,19),t.DNE(49,D,2,0,"th",15)(50,$,2,1,"td",16),t.bVm(),t.qex(51,20),t.DNE(52,A,2,0,"th",15)(53,I,4,0,"td",16),t.bVm(),t.DNE(54,x,1,0,"tr",21)(55,_,1,0,"tr",22),t.k0s()()()()()),2&i){let d;t.R7$(9),t.Y8G("formGroup",a.productForm),t.R7$(5),t.Y8G("ngIf",null==(d=a.productForm.get("name"))?null:d.hasError("required")),t.R7$(5),t.Y8G("ngForOf",a.productTypes),t.R7$(5),t.Y8G("ngForOf",a.riskLevels),t.R7$(5),t.Y8G("disabled",!a.productForm.valid),t.R7$(9),t.Y8G("dataSource",a.products()),t.R7$(16),t.Y8G("matHeaderRowDef",a.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",a.displayedColumns)}},dependencies:[l.MD,l.YU,l.Sq,l.bT,c.X1,c.qT,c.me,c.Q0,c.BC,c.cb,c.j4,c.JD,s.Hu,s.RN,s.m2,s.MM,s.dh,u.Hl,u.$z,u.iY,h.fS,h.fg,p.rl,p.nJ,p.TL,g.Ve,g.VO,v.wT,m.tP,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,C.m_,C.An,F._T],styles:[".product-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{margin-bottom:24px;color:#333}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:350px 1fr;gap:24px;align-items:start}.full-width[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{margin-bottom:24px}mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500}table[_ngcontent-%COMP%]{width:100%}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:700;text-transform:uppercase}.badge.low[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.badge.medium[_ngcontent-%COMP%]{background-color:#fff3e0;color:#ef6c00}.badge.high[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.badge.critical[_ngcontent-%COMP%]{background-color:#3e2723;color:#d7ccc8;border:1px solid #d7ccc8}button[type=submit][_ngcontent-%COMP%]{width:100%;margin-top:16px}"]})}}return e})()}}]);